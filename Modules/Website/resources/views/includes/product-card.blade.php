<div class="product--item">
    <div class="product--image" style="background-image: url({{ asset($item->image) }})">
        <div class="d-flex justify-content-between align-items-start flex-end p-2" style="flex-direction: row-reverse;">

            <div class=" d-flex  gap-2 flex-column">
                @auth
                <span class="fav {{ $item->favorite ? 'liked favorite' : 'unliked' }}" onclick="addWish(this)"
                    data-id="{{ $item->id }}">
                    @if ($item->favorite)
                        <svg width="41" height="40" viewBox="0 0 41 40" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <circle cx="20.333" cy="20" r="19.5" stroke="#EAECF0" />
                            <path
                                d="M30.833 16.8125C30.833 23.375 21.1027 28.6869 20.6883 28.9062C20.5791 28.965 20.457 28.9958 20.333 28.9958C20.209 28.9958 20.0869 28.965 19.9777 28.9062C19.5633 28.6869 9.83301 23.375 9.83301 16.8125C9.83474 15.2715 10.4477 13.794 11.5374 12.7044C12.627 11.6147 14.1045 11.0017 15.6455 11C17.5814 11 19.2764 11.8325 20.333 13.2397C21.3896 11.8325 23.0846 11 25.0205 11C26.5615 11.0017 28.039 11.6147 29.1286 12.7044C30.2183 13.794 30.8313 15.2715 30.833 16.8125Z"
                                fill="#ED3436" />
                        </svg>

                        </svg>
                    @else
                        <svg width="40" height="40" viewBox="0 0 40 40" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <circle cx="20" cy="20" r="19.5" stroke="#EAECF0" />
                            <path
                                d="M24.6875 11C22.7516 11 21.0566 11.8325 20 13.2397C18.9434 11.8325 17.2484 11 15.3125 11C13.7715 11.0017 12.294 11.6147 11.2044 12.7044C10.1147 13.794 9.50174 15.2715 9.5 16.8125C9.5 23.375 19.2303 28.6869 19.6447 28.9062C19.7539 28.965 19.876 28.9958 20 28.9958C20.124 28.9958 20.2461 28.965 20.3553 28.9062C20.7697 28.6869 30.5 23.375 30.5 16.8125C30.4983 15.2715 29.8853 13.794 28.7956 12.7044C27.706 11.6147 26.2285 11.0017 24.6875 11ZM20 27.3875C18.2881 26.39 11 21.8459 11 16.8125C11.0015 15.6692 11.4563 14.5732 12.2647 13.7647C13.0732 12.9563 14.1692 12.5015 15.3125 12.5C17.1359 12.5 18.6669 13.4713 19.3062 15.0312C19.3628 15.1688 19.4589 15.2865 19.5824 15.3693C19.7059 15.4521 19.8513 15.4963 20 15.4963C20.1487 15.4963 20.2941 15.4521 20.4176 15.3693C20.5411 15.2865 20.6372 15.1688 20.6937 15.0312C21.3331 13.4684 22.8641 12.5 24.6875 12.5C25.8308 12.5015 26.9268 12.9563 27.7353 13.7647C28.5437 14.5732 28.9985 15.6692 29 16.8125C29 21.8384 21.71 26.3891 20 27.3875Z"
                                fill="#D0D5DD" />
                        </svg>
                    @endif
                </span>
                @endauth
                <a class="eye" href="{{ route('front.productDetails', $item->slug) }}">
                    <svg width="40" height="40" viewBox="0 0 40 40" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <circle cx="20" cy="20" r="19.5" stroke="#EAECF0" />
                        <path
                            d="M31.1853 19.6962C31.1525 19.6222 30.3584 17.8606 28.5931 16.0953C26.2409 13.7431 23.27 12.5 20 12.5C16.73 12.5 13.7591 13.7431 11.4069 16.0953C9.64155 17.8606 8.84374 19.625 8.81468 19.6962C8.77203 19.7922 8.75 19.896 8.75 20.0009C8.75 20.1059 8.77203 20.2097 8.81468 20.3056C8.84749 20.3797 9.64155 22.1403 11.4069 23.9056C13.7591 26.2569 16.73 27.5 20 27.5C23.27 27.5 26.2409 26.2569 28.5931 23.9056C30.3584 22.1403 31.1525 20.3797 31.1853 20.3056C31.2279 20.2097 31.25 20.1059 31.25 20.0009C31.25 19.896 31.2279 19.7922 31.1853 19.6962ZM20 26C17.1144 26 14.5934 24.9509 12.5066 22.8828C11.6503 22.0313 10.9218 21.0603 10.3437 20C10.9216 18.9396 11.6501 17.9686 12.5066 17.1172C14.5934 15.0491 17.1144 14 20 14C22.8856 14 25.4066 15.0491 27.4934 17.1172C28.3514 17.9684 29.0815 18.9394 29.6609 20C28.985 21.2619 26.0403 26 20 26ZM20 15.5C19.11 15.5 18.2399 15.7639 17.4999 16.2584C16.7599 16.7529 16.1831 17.4557 15.8425 18.2779C15.5019 19.1002 15.4128 20.005 15.5865 20.8779C15.7601 21.7508 16.1887 22.5526 16.818 23.182C17.4473 23.8113 18.2492 24.2399 19.1221 24.4135C19.995 24.5872 20.8998 24.4981 21.7221 24.1575C22.5443 23.8169 23.2471 23.2401 23.7416 22.5001C24.2361 21.76 24.5 20.89 24.5 20C24.4988 18.8069 24.0242 17.663 23.1806 16.8194C22.337 15.9757 21.1931 15.5012 20 15.5ZM20 23C19.4066 23 18.8266 22.8241 18.3333 22.4944C17.8399 22.1648 17.4554 21.6962 17.2284 21.1481C17.0013 20.5999 16.9419 19.9967 17.0576 19.4147C17.1734 18.8328 17.4591 18.2982 17.8787 17.8787C18.2982 17.4591 18.8328 17.1734 19.4147 17.0576C19.9967 16.9419 20.5999 17.0013 21.148 17.2284C21.6962 17.4554 22.1648 17.8399 22.4944 18.3333C22.824 18.8266 23 19.4067 23 20C23 20.7956 22.6839 21.5587 22.1213 22.1213C21.5587 22.6839 20.7956 23 20 23Z"
                            fill="#D0D5DD" />
                    </svg>

                </a>

            </div>
            @if ($item->created_at->diffInDays() < 30)
                <span class="badge badge--new"> {{ __('front.new') }}</span>
            @endif
        </div>
    </div>

    <div class="product--content">
        <h6><b>{{ $item->title }}</b></h6>
        <p>{{ Str::limit($item->short_description, 60, '...') }}</p>
        <div class="colors">
            @if (isset($item->variations))
                @foreach ($item->variations()->groupBy('color_id')->select('color_id')->get() as $attr)
                    {{-- {{ dd($attr) }} --}}
                    {{-- @if (optional(optional($attr->attributeValue)->attribute)->type == 'color') --}}
                    <label  style="border:1px solid {{ $attr->color->value }};" class="rounded-circle p-1">

                        <div style="width: 20px;height: 20px;background:{{ $attr->color->value }}; "
                            class=" d-flex justify-content-center rounded-circle align-items-center  w3-round-large">

                        </div>
                    </label>
                    {{-- @endif --}}
                @endforeach
            @endif
        </div>
        <div class="price d-flex justify-content-between align-items-center">
            <span>
                <b class="main-color">{{ $item->after_discount }} {{ session('country')->currency }}</b>
                @if ($item->discount > 0)
                    <del class="text-muted">{{ round($item->price) }} {{ session('country')->currency }}</del>
                @endif
            </span>

            <a href=" {{ route('front.productDetails', $item->slug) }}" class="float-end">
                <svg width="41" height="40" viewBox="0 0 41 40" fill="none"
                    xmlns="http://www.w3.org/2000/svg">
                    <circle cx="20.667" cy="20" r="19.5" fill="white" stroke="#dcc861" />
                    <path
                        d="M28.167 30C28.5648 30 28.9463 29.842 29.2277 29.5607C29.509 29.2794 29.667 28.8978 29.667 28.5C29.667 28.1022 29.509 27.7206 29.2277 27.4393C28.9463 27.158 28.5648 27 28.167 27C27.7692 27 27.3876 27.158 27.1063 27.4393C26.825 27.7206 26.667 28.1022 26.667 28.5C26.667 28.8978 26.825 29.2794 27.1063 29.5607C27.3876 29.842 27.7692 30 28.167 30ZM18.167 30C18.5648 30 18.9463 29.842 19.2277 29.5607C19.509 29.2794 19.667 28.8978 19.667 28.5C19.667 28.1022 19.509 27.7206 19.2277 27.4393C18.9463 27.158 18.5648 27 18.167 27C17.7692 27 17.3876 27.158 17.1063 27.4393C16.825 27.7206 16.667 28.1022 16.667 28.5C16.667 28.8978 16.825 29.2794 17.1063 29.5607C17.3876 29.842 17.7692 30 18.167 30Z"
                        fill="#dcc861" stroke="#dcc861" stroke-width="1.5" stroke-linecap="round"
                        stroke-linejoin="round" />
                    <path
                        d="M13.667 12H30.667L28.667 23M13.667 12L15.667 23H28.667M13.667 12C13.5 11.333 12.667 10 10.667 10M28.667 23H13.897C12.113 23 11.167 23.781 11.167 25C11.167 26.219 12.113 27 13.897 27H28.167"
                        stroke="#dcc861" stroke-linecap="round" stroke-linejoin="round" />
                </svg>

            </a>
        </div>
    </div>
</div>
